<!doctype html>
<html lang="zh-Hans">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Expires" content="0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <!-- 表示客户端可以缓存资源，每次使用缓存资源前都必须重新验证其有效性 -->
  <meta http-equiv="Cache-control" content="no-cache" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover" />
  <meta name="referrer" content="no-referrer" />
  <!-- 全屏显示 -->
  <meta name="full-screen" content="yes" />
  <!-- 关闭识别数字为手机号码 -->
  <meta name="format-detection" content="telephone=no" />
  <!-- 关闭识别邮箱 -->
  <meta content="email=no" name="format-detection" />
  <!-- 将在标题下显示的页面的简短描述。这应该是最多200个字符，并且在显示时可能被进一步截断。 -->
  <meta name="twitter:description" content="%VITE_DESCRIPTION%" />
  <!-- 关键字 -->
  <meta name="keywords" content="%VITE_KEYWORDS%" />
  <!-- 描述 -->
  <meta name="description" content="%VITE_DESCRIPTION%" />
  <link rel="icon" type="image/x-icon" href="/favicon.svg" />
  <title>%VITE_TITLE%</title>
  
  <script>
    (function () {
      // 特性检测：Vue3 需要 Proxy/ES6 支持
      const isCompatible = () => {
        try {
          // 检测 Proxy/ES6 支持
          new Proxy({}, {});
          eval("class {}");
          eval("() => {}");
          return true;
        } catch (e) {
          return false;
        }
      };

      // 浏览器类型检测（针对 IE/旧 Edge）
      const isUnsupportedBrowser = () => {
        const ua = navigator.userAgent;
        return ua.indexOf('MSIE ') > -1 ||  // IE 10-
          ua.indexOf('Trident/') > -1 ||    // IE 11
          ua.indexOf('Edge/16') > -1;       // Edge Legacy (16-18)
      };

      // 显示提示
      const showWarning = () => {
        const div = document.createElement('div');
        div.innerHTML = `
            <div style="
              position: fixed;
              top: 0;
              left: 0;
              right: 0;
              bottom: 0;
              background: rgba(0,0,0,0.9);
              color: white;
              z-index: 9999;
              padding: 20px;
              text-align: center;
              font-family: sans-serif;
            ">
              <h1>⚠️ 浏览器不兼容</h1>
              <p>您的浏览器无法运行本应用，请使用以下现代浏览器：</p>
              <div style="margin-top: 20px;">
                <a href="https://www.google.com/chrome/" style="color: #4CAF50; margin: 0 10px;">下载 Chrome</a>
                <a href="https://www.mozilla.org/firefox/" style="color: #FF9800; margin: 0 10px;">下载 Firefox</a>
                <a href="https://www.microsoft.com/edge" style="color: #2196F3; margin: 0 10px;">下载 Edge</a>
              </div>
            </div>
          `;
        document.body.prepend(div);
      };

      // 执行检测
      if (!isCompatible() || isUnsupportedBrowser()) {
        showWarning();
        throw new Error('Browser not supported'); // 阻止后续 JS 执行
      }
    })();
  </script>
</head>

<body>
  <div id="app">
    <div id="appLoading"></div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>